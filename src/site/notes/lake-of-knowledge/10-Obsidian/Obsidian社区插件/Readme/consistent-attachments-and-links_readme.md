---
{"uid":2023080322162597,"title":"Obsidian 插件：Consistent attachments and links","tags":["笔记文件处理","obsidian插件","readme"],"description":"自动移动笔记附件并更新链接","author":"AI","type":"readme","draft":false,"editable":false,"modified":20230101000000,"dg-publish":true,"permalink":"/lake-of-knowledge/10-obsidian/obsidian/readme/consistent-attachments-and-links-readme/","dgPassFrontmatter":true}
---


# Obsidian 插件：Consistent attachments and links

> [!Note] 插件名片
> - 插件名称：Consistent attachments and links
> - 插件作者：Dmitry Savosh
> - 插件说明：自动移动笔记附件并更新链接
> - 插件分类：[' 笔记文件处理 ', 'obsidian 插件 ', 'readme']
> - 项目地址：[点我访问](https://github.com/dy-sh/obsidian-consistent-attachments-and-links)
> - 国内下载地址：[下载安装](https://pkmer.cn/products/plugin/pluginMarket/?consistent-attachments-and-links)

## 概述

自动移动笔记附件并更新链接

> [!tip] 原文出处
>
>下面自述文件的来源于 [Readme](https://ghproxy.net/https://raw.githubusercontent.com/dy-sh/obsidian-consistent-attachments-and-links/master/README.md)
>

---

## Readme(翻译）

下面是 [[consistent-attachments-and-links\|consistent-attachments-and-links]] 插件的自述翻译

# 一致的附件和链接

这个插件适用于 [Obsidian](https://obsidian.md/)，它允许你重新组织你的库，使其更加一致。接下来，插件将自动维护你的库的一致性。

<br>

⚠️⚠️⚠️ 在首次使用插件之前，请务必备份你的库！⚠️⚠️⚠️

## 这个想法是什么

这个想法是让所有笔记和附件之间的链接严格遵循 Markdown 格式，并支持它们的相对路径。当你想在另一个不知道你的保险库文件夹位置的程序中打开一个笔记时，或者例如你想在 GitHub 或其他允许上传 Markdown 文件的网站上发布和阅读你的笔记时，这是非常有用的，你需要兼容性。

理想情况下，所有附件应该位于笔记文件夹或其子文件夹中。这不是必需的，但在这种情况下，你可以轻松地将一个笔记导出到保险库之外的一个单独的文件夹中，知道所有的附件都与它一起。通过删除一个笔记，你可以确信你不会删除你需要的附件，也不会在你的库中留下不必要的垃圾。

如果你将附件存储在笔记或其子文件夹的文件夹中，插件将在你移动或删除笔记时自动移动/删除附件。

## 免责声明

**在使用此插件之前，请备份您的库！一旦转换链接，将无法转换回来。**

**要使用此插件，您将不得不放弃 Obsidian 在链接格式中使用的所有专有内容。**

Obsidian 具有非常聪明的文件链接搜索功能，但如果您希望您的笔记与其他程序兼容，这可能会对您造成问题。这是该插件的主要目的。

如果您仍然希望与某些 Obsidian 功能具有链接兼容性，请向此插件的 [github存储库](https://github.com/derwish-pro/obsidian-consistent-attachments-and-links/issues) 提交功能请求。

<br>

如何配置 Obsidian

插件正常工作所需的 Obsidian 设置：

- **“文件和链接>自动更新内部链接”：禁用。**插件本身负责更新链接。当 Obsidian 显示一个对话框询问是否更新链接时，请拒绝。
- **“新链接格式”：相对文件路径。**否则，无法保证链接的严格符合性。
- **“使用\[\[Wikilinks\]\]”：禁用。**Wikilinks 不是一个 Markdown 标准。

推荐的附加设置（插件工作不需要）：

- **“新附件的默认位置”：在当前文件夹的子文件夹中。**这不是必需的，但这样可以确保附件始终位于您的笔记旁边。选项“与当前文件夹相同的文件夹”也适用。
- **“子文件夹名称”：“_attachments”**。或者其他任何名称。
<br>

如何检查库的一致性

运行“检查保险库一致性”命令并查看报告。

如何实现现有库的一致性

> 在进行以下步骤之前，非常重要的是备份整个保险库文件夹。

在插件设置中指定“附件子文件夹”的名称。

按照以下顺序运行命令以重新组织保险库：

- 用 Markdown 链接替换所有维基链接
- 将所有嵌入路径转换为相对路径
- 将所有链接路径转换为相对路径
- 重命名所有附件（使用唯一附件插件，可选）
- 收集所有附件
- 删除空文件夹

或者只需运行“重新组织保险库”命令，然后使用唯一附件插件重命名所有附件（可选）

您可以查看控制台日志，以确保一切都没有错误。错误可能指向已不存在的文件的损坏链接（文件路径）。

这个插件如何帮助保持一致性

当你在 Obsidian 中移动一个笔记时，插件会检查是否需要移动附件并更新链接。如果附件在一个带有笔记或子文件夹的文件夹中，插件会将附件与笔记一起移动。

它会安全地执行此操作，确保不移动其他笔记引用的附件。如果你移动了一个在其他笔记中使用的附件的笔记，插件会自动创建这些文件的副本，并将移动的笔记重定向到这些副本。

如果你将一个笔记移动到一个已经存在相同名称附件的文件夹中，插件可以根据“**在移动笔记时删除重复附件**”设置以两种模式工作：

- **禁用**：重复的文件将被重命名（生成新的名称），然后移动到一个新的文件夹中与笔记一起。
- **启用**：它将删除你移动的重复文件，只保留目标文件夹中已经存在的文件。如果你对所有附件都有唯一的名称，这将非常有用。你可以使用 [Unique attachments](https://github.com/derwish-pro/obsidian-unique-attachments) 插件，它通过对文件内容进行哈希生成文件名来重命名附件（在启用此选项的情况下，同时使用这两个插件效果更好）。

在删除一个笔记时，插件可以删除所有不再使用的附件。这个选项可以禁用。

插件还能够自动删除由移动文件导致的空文件夹，并在重命名笔记时更新链接的文本（可选）。

<br>

## 命令

插件具有以下可调用的命令：

<br>

### 检查保险库的一致性

检查是否存在保险库一致性问题并打印报告。报告将包含以下内容：

- 错误链接
- 错误嵌入路径
- 错误的笔记链接部分（#符号后）
- Wiki 链接
- Wiki 嵌入

### 重新组织保险库

逐个运行以下命令：

- 用 Markdown 链接替换所有维基链接
- 将所有嵌入路径转换为相对路径
- 将所有链接路径转换为相对路径
- 收集所有附件
- 删除空文件夹

这是清理您的库的最快方法。

<br>

### 将所有维基链接替换为 Markdown 链接

在笔记中搜索所有维基链接，并将它们转换为常规的 Markdown 链接。

示例：

`[[readme]]`

将变成：

`[readme](readme.md)`

<br>

### 将所有嵌入路径转换为相对路径

搜索所有笔记中的嵌入内容，并将其路径转换为相对格式。

示例：

`![](title.png)`

将变成：

`![](../attachments/title.png)`

这是确保所有嵌入链接准确指向正确文件的一项最重要的步骤之一，有助于保持一致性。

### 将所有链接路径转换为相对路径

与“将所有嵌入路径转换为相对路径”相同，用于链接。

示例：

`[](readme.md)`

将变成：

`[](../readme.md)`

<br>

### 收集所有附件

该插件会找到所有的笔记并将所有附件移动到笔记文件夹中。如果您不确定所有附件是否都在您的笔记文件夹中，并且想要清理您的库，这将非常有用。在“附件子文件夹”插件设置参数中，您可以指定子文件夹的名称，以便将附件移动到该文件夹中。如果您将此字段留空，则附件将直接移动到带有笔记的文件夹中，而不会创建子文件夹。随时可以更改此名称并通过一次点击重新组织文件夹结构，附件将被移动到新的文件夹中。

### 删除空文件夹

删除您的库中的所有空文件夹。
